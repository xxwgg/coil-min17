<!doctype html><html lang=en class=no-js> <head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="An image loading library for Android backed by Kotlin Coroutines"><meta name=author content="2021 Coil Contributors"><link href=https://coil-kt.github.io/coil/changelog/ rel=canonical><link rel=icon href=../images/coil_logo_black.ico><meta name=generator content="mkdocs-1.2.1, mkdocs-material-7.1.10"><title>Change Log - Coil</title><link rel=stylesheet href=../assets/stylesheets/main.1fe995fd.min.css><link rel=stylesheet href=../assets/stylesheets/palette.f1a3b89f.min.css><meta name=theme-color content=#ffffff><link rel=preconnect href=https://fonts.gstatic.com crossorigin><link rel=stylesheet href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700%7CRoboto+Mono&display=fallback"><style>:root{--md-text-font-family:"Roboto";--md-code-font-family:"Roboto Mono"}</style><link rel=stylesheet href=../css/site.css></head> <body dir=ltr data-md-color-scheme data-md-color-primary=white data-md-color-accent=white> <script>function __prefix(e){return new URL("..",location).pathname+"."+e}function __get(e,t=localStorage){return JSON.parse(t.getItem(__prefix(e)))}</script> <input class=md-toggle data-md-toggle=drawer type=checkbox id=__drawer autocomplete=off> <input class=md-toggle data-md-toggle=search type=checkbox id=__search autocomplete=off> <label class=md-overlay for=__drawer></label> <div data-md-component=skip> <a href=#changelog class=md-skip> Skip to content </a> </div> <div data-md-component=announce> </div> <header class=md-header data-md-component=header> <nav class="md-header__inner md-grid" aria-label=Header> <a href=.. title=Coil class="md-header__button md-logo" aria-label=Coil data-md-component=logo> <img src=../images/coil_logo_black.svg alt=logo> </a> <label class="md-header__button md-icon" for=__drawer> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2z"/></svg> </label> <div class=md-header__title data-md-component=header-title> <div class=md-header__ellipsis> <div class=md-header__topic> <span class=md-ellipsis> Coil </span> </div> <div class=md-header__topic data-md-component=header-topic> <span class=md-ellipsis> Change Log </span> </div> </div> </div> <label class="md-header__button md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> </label> <div class=md-search data-md-component=search role=dialog> <label class=md-search__overlay for=__search></label> <div class=md-search__inner role=search> <form class=md-search__form name=search> <input type=text class=md-search__input name=query aria-label=Search placeholder=Search autocapitalize=off autocorrect=off autocomplete=off spellcheck=false data-md-component=search-query data-md-state=active required> <label class="md-search__icon md-icon" for=__search> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5z"/></svg> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </label> <button type=reset class="md-search__icon md-icon" aria-label=Clear tabindex=-1> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41z"/></svg> </button> </form> <div class=md-search__output> <div class=md-search__scrollwrap data-md-scrollfix> <div class=md-search-result data-md-component=search-result> <div class=md-search-result__meta> Initializing search </div> <ol class=md-search-result__list></ol> </div> </div> </div> </div> </div> <div class=md-header__source> <a href=https://github.com/coil-kt/coil title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> Coil </div> </a> </div> </nav> </header> <div class=md-container data-md-component=container> <main class=md-main data-md-component=main> <div class="md-main__inner md-grid"> <div class="md-sidebar md-sidebar--primary" data-md-component=sidebar data-md-type=navigation> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--primary" aria-label=Navigation data-md-level=0> <label class=md-nav__title for=__drawer> <a href=.. title=Coil class="md-nav__button md-logo" aria-label=Coil data-md-component=logo> <img src=../images/coil_logo_black.svg alt=logo> </a> Coil </label> <div class=md-nav__source> <a href=https://github.com/coil-kt/coil title="Go to repository" class=md-source data-md-component=source> <div class="md-source__icon md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 448 512"><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg> </div> <div class=md-source__repository> Coil </div> </a> </div> <ul class=md-nav__list data-md-scrollfix> <li class=md-nav__item> <a href=.. class=md-nav__link> Overview </a> </li> <li class=md-nav__item> <a href=../getting_started/ class=md-nav__link> Getting Started </a> </li> <li class=md-nav__item> <a href=../migrating/ class=md-nav__link> Migrating from Glide/Picasso </a> </li> <li class=md-nav__item> <a href=../image_loaders/ class=md-nav__link> Image Loaders </a> </li> <li class=md-nav__item> <a href=../image_requests/ class=md-nav__link> Image Requests </a> </li> <li class=md-nav__item> <a href=../targets/ class=md-nav__link> Targets </a> </li> <li class=md-nav__item> <a href=../transformations/ class=md-nav__link> Transformations </a> </li> <li class=md-nav__item> <a href=../transitions/ class=md-nav__link> Transitions </a> </li> <li class=md-nav__item> <a href=../image_pipeline/ class=md-nav__link> Extending the Image Pipeline </a> </li> <li class=md-nav__item> <a href=../java_compatibility/ class=md-nav__link> Java Compatibility </a> </li> <li class=md-nav__item> <a href=../compose/ class=md-nav__link> Jetpack Compose </a> </li> <li class=md-nav__item> <a href=../gifs/ class=md-nav__link> GIFs </a> </li> <li class=md-nav__item> <a href=../svgs/ class=md-nav__link> SVGs </a> </li> <li class=md-nav__item> <a href=../videos/ class=md-nav__link> Video Frames </a> </li> <li class=md-nav__item> <a href=../recipes/ class=md-nav__link> Recipes </a> </li> <li class=md-nav__item> <a href=../faq/ class=md-nav__link> FAQ </a> </li> <li class=md-nav__item> <a href=../api/ class=md-nav__link> API ‚èè </a> </li> <li class="md-nav__item md-nav__item--active"> <input class="md-nav__toggle md-toggle" data-md-toggle=toc type=checkbox id=__toc> <label class="md-nav__link md-nav__link--active" for=__toc> Change Log <span class="md-nav__icon md-icon"></span> </label> <a href=./ class="md-nav__link md-nav__link--active"> Change Log </a> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#200-alpha04-november-22-2021 class=md-nav__link> [2.0.0-alpha04] - November 22, 2021 </a> </li> <li class=md-nav__item> <a href=#200-alpha03-november-12-2021 class=md-nav__link> [2.0.0-alpha03] - November 12, 2021 </a> </li> <li class=md-nav__item> <a href=#200-alpha02-october-24-2021 class=md-nav__link> [2.0.0-alpha02] - October 24, 2021 </a> </li> <li class=md-nav__item> <a href=#200-alpha01-october-11-2021 class=md-nav__link> [2.0.0-alpha01] - October 11, 2021 </a> </li> <li class=md-nav__item> <a href=#140-october-6-2021 class=md-nav__link> [1.4.0] - October 6, 2021 </a> </li> <li class=md-nav__item> <a href=#132-august-4-2021 class=md-nav__link> [1.3.2] - August 4, 2021 </a> </li> <li class=md-nav__item> <a href=#131-july-28-2021 class=md-nav__link> [1.3.1] - July 28, 2021 </a> </li> <li class=md-nav__item> <a href=#130-july-10-2021 class=md-nav__link> [1.3.0] - July 10, 2021 </a> </li> <li class=md-nav__item> <a href=#122-june-4-2021 class=md-nav__link> [1.2.2] - June 4, 2021 </a> </li> <li class=md-nav__item> <a href=#121-april-27-2021 class=md-nav__link> [1.2.1] - April 27, 2021 </a> </li> <li class=md-nav__item> <a href=#120-april-12-2021 class=md-nav__link> [1.2.0] - April 12, 2021 </a> </li> <li class=md-nav__item> <a href=#111-january-11-2021 class=md-nav__link> [1.1.1] - January 11, 2021 </a> </li> <li class=md-nav__item> <a href=#110-november-24-2020 class=md-nav__link> [1.1.0] - November 24, 2020 </a> </li> <li class=md-nav__item> <a href=#100-october-22-2020 class=md-nav__link> [1.0.0] - October 22, 2020 </a> </li> <li class=md-nav__item> <a href=#100-rc3-september-21-2020 class=md-nav__link> [1.0.0-rc3] - September 21, 2020 </a> </li> <li class=md-nav__item> <a href=#100-rc2-september-3-2020 class=md-nav__link> [1.0.0-rc2] - September 3, 2020 </a> </li> <li class=md-nav__item> <a href=#0130-september-3-2020 class=md-nav__link> [0.13.0] - September 3, 2020 </a> </li> <li class=md-nav__item> <a href=#100-rc1-august-18-2020 class=md-nav__link> [1.0.0-rc1] - August 18, 2020 </a> </li> <li class=md-nav__item> <a href=#0120-august-18-2020 class=md-nav__link> [0.12.0] - August 18, 2020 </a> </li> <li class=md-nav__item> <a href=#0110-may-14-2020 class=md-nav__link> [0.11.0] - May 14, 2020 </a> </li> <li class=md-nav__item> <a href=#0101-april-26-2020 class=md-nav__link> [0.10.1] - April 26, 2020 </a> </li> <li class=md-nav__item> <a href=#0100-april-20-2020 class=md-nav__link> [0.10.0] - April 20, 2020 </a> <nav class=md-nav aria-label="[0.10.0] - April 20, 2020"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#highlights class=md-nav__link> Highlights </a> </li> <li class=md-nav__item> <a href=#full-release-notes class=md-nav__link> Full Release Notes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#095-february-6-2020 class=md-nav__link> [0.9.5] - February 6, 2020 </a> </li> <li class=md-nav__item> <a href=#094-february-3-2020 class=md-nav__link> [0.9.4] - February 3, 2020 </a> </li> <li class=md-nav__item> <a href=#093-february-1-2020 class=md-nav__link> [0.9.3] - February 1, 2020 </a> </li> <li class=md-nav__item> <a href=#092-january-19-2020 class=md-nav__link> [0.9.2] - January 19, 2020 </a> </li> <li class=md-nav__item> <a href=#091-december-30-2019 class=md-nav__link> [0.9.1] - December 30, 2019 </a> </li> <li class=md-nav__item> <a href=#090-december-30-2019 class=md-nav__link> [0.9.0] - December 30, 2019 </a> </li> <li class=md-nav__item> <a href=#080-october-22-2019 class=md-nav__link> [0.8.0] - October 22, 2019 </a> </li> <li class=md-nav__item> <a href=#070-september-8-2019 class=md-nav__link> [0.7.0] - September 8, 2019 </a> </li> <li class=md-nav__item> <a href=#061-august-16-2019 class=md-nav__link> [0.6.1] - August 16, 2019 </a> </li> <li class=md-nav__item> <a href=#060-august-12-2019 class=md-nav__link> [0.6.0] - August 12, 2019 </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=../contributing/ class=md-nav__link> Contributing </a> </li> <li class=md-nav__item> <a href=../code_of_conduct/ class=md-nav__link> Code of Conduct </a> </li> </ul> </nav> </div> </div> </div> <div class="md-sidebar md-sidebar--secondary" data-md-component=sidebar data-md-type=toc> <div class=md-sidebar__scrollwrap> <div class=md-sidebar__inner> <nav class="md-nav md-nav--secondary" aria-label="Table of contents"> <label class=md-nav__title for=__toc> <span class="md-nav__icon md-icon"></span> Table of contents </label> <ul class=md-nav__list data-md-component=toc data-md-scrollfix> <li class=md-nav__item> <a href=#200-alpha04-november-22-2021 class=md-nav__link> [2.0.0-alpha04] - November 22, 2021 </a> </li> <li class=md-nav__item> <a href=#200-alpha03-november-12-2021 class=md-nav__link> [2.0.0-alpha03] - November 12, 2021 </a> </li> <li class=md-nav__item> <a href=#200-alpha02-october-24-2021 class=md-nav__link> [2.0.0-alpha02] - October 24, 2021 </a> </li> <li class=md-nav__item> <a href=#200-alpha01-october-11-2021 class=md-nav__link> [2.0.0-alpha01] - October 11, 2021 </a> </li> <li class=md-nav__item> <a href=#140-october-6-2021 class=md-nav__link> [1.4.0] - October 6, 2021 </a> </li> <li class=md-nav__item> <a href=#132-august-4-2021 class=md-nav__link> [1.3.2] - August 4, 2021 </a> </li> <li class=md-nav__item> <a href=#131-july-28-2021 class=md-nav__link> [1.3.1] - July 28, 2021 </a> </li> <li class=md-nav__item> <a href=#130-july-10-2021 class=md-nav__link> [1.3.0] - July 10, 2021 </a> </li> <li class=md-nav__item> <a href=#122-june-4-2021 class=md-nav__link> [1.2.2] - June 4, 2021 </a> </li> <li class=md-nav__item> <a href=#121-april-27-2021 class=md-nav__link> [1.2.1] - April 27, 2021 </a> </li> <li class=md-nav__item> <a href=#120-april-12-2021 class=md-nav__link> [1.2.0] - April 12, 2021 </a> </li> <li class=md-nav__item> <a href=#111-january-11-2021 class=md-nav__link> [1.1.1] - January 11, 2021 </a> </li> <li class=md-nav__item> <a href=#110-november-24-2020 class=md-nav__link> [1.1.0] - November 24, 2020 </a> </li> <li class=md-nav__item> <a href=#100-october-22-2020 class=md-nav__link> [1.0.0] - October 22, 2020 </a> </li> <li class=md-nav__item> <a href=#100-rc3-september-21-2020 class=md-nav__link> [1.0.0-rc3] - September 21, 2020 </a> </li> <li class=md-nav__item> <a href=#100-rc2-september-3-2020 class=md-nav__link> [1.0.0-rc2] - September 3, 2020 </a> </li> <li class=md-nav__item> <a href=#0130-september-3-2020 class=md-nav__link> [0.13.0] - September 3, 2020 </a> </li> <li class=md-nav__item> <a href=#100-rc1-august-18-2020 class=md-nav__link> [1.0.0-rc1] - August 18, 2020 </a> </li> <li class=md-nav__item> <a href=#0120-august-18-2020 class=md-nav__link> [0.12.0] - August 18, 2020 </a> </li> <li class=md-nav__item> <a href=#0110-may-14-2020 class=md-nav__link> [0.11.0] - May 14, 2020 </a> </li> <li class=md-nav__item> <a href=#0101-april-26-2020 class=md-nav__link> [0.10.1] - April 26, 2020 </a> </li> <li class=md-nav__item> <a href=#0100-april-20-2020 class=md-nav__link> [0.10.0] - April 20, 2020 </a> <nav class=md-nav aria-label="[0.10.0] - April 20, 2020"> <ul class=md-nav__list> <li class=md-nav__item> <a href=#highlights class=md-nav__link> Highlights </a> </li> <li class=md-nav__item> <a href=#full-release-notes class=md-nav__link> Full Release Notes </a> </li> </ul> </nav> </li> <li class=md-nav__item> <a href=#095-february-6-2020 class=md-nav__link> [0.9.5] - February 6, 2020 </a> </li> <li class=md-nav__item> <a href=#094-february-3-2020 class=md-nav__link> [0.9.4] - February 3, 2020 </a> </li> <li class=md-nav__item> <a href=#093-february-1-2020 class=md-nav__link> [0.9.3] - February 1, 2020 </a> </li> <li class=md-nav__item> <a href=#092-january-19-2020 class=md-nav__link> [0.9.2] - January 19, 2020 </a> </li> <li class=md-nav__item> <a href=#091-december-30-2019 class=md-nav__link> [0.9.1] - December 30, 2019 </a> </li> <li class=md-nav__item> <a href=#090-december-30-2019 class=md-nav__link> [0.9.0] - December 30, 2019 </a> </li> <li class=md-nav__item> <a href=#080-october-22-2019 class=md-nav__link> [0.8.0] - October 22, 2019 </a> </li> <li class=md-nav__item> <a href=#070-september-8-2019 class=md-nav__link> [0.7.0] - September 8, 2019 </a> </li> <li class=md-nav__item> <a href=#061-august-16-2019 class=md-nav__link> [0.6.1] - August 16, 2019 </a> </li> <li class=md-nav__item> <a href=#060-august-12-2019 class=md-nav__link> [0.6.0] - August 12, 2019 </a> </li> </ul> </nav> </div> </div> </div> <div class=md-content data-md-component=content> <article class="md-content__inner md-typeset"> <h1 id=changelog>Changelog<a class=headerlink href=#changelog title="Permanent link">&para;</a></h1> <h2 id=200-alpha04-november-22-2021>[2.0.0-alpha04] - November 22, 2021<a class=headerlink href=#200-alpha04-november-22-2021 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: Add <code>AsyncImage</code> to <code>coil-compose</code>.<ul> <li><code>AsyncImage</code> is a composable that executes an <code>ImageRequest</code> asynchronously and renders the result.</li> <li><strong><code>AsyncImage</code> is intended to replace <code>rememberImagePainter</code> for most use cases.</strong></li> <li>Its API is not final and may change before the final 2.0 release.</li> <li>It has a similar API to <code>Image</code> and supports the same arguments: <code>Alignment</code>, <code>ContentScale</code>, <code>alpha</code>, <code>ColorFilter</code>, and <code>FilterQuality</code>.</li> <li>It supports overwriting what's drawn for each <code>AsyncImagePainter</code> state using the <code>content</code>, <code>loading</code>, <code>success</code>, and <code>error</code> arguments.</li> <li>It fixes a number of design issues that <code>rememberImagePainter</code> has with resolving image size and scale.</li> <li>Example usages:</li> </ul> </li> </ul> <div class=highlight><pre><span></span><code><span class=c1>// Only draw the image.</span>
<span class=n>AsyncImage</span><span class=p>(</span>
    <span class=n>model</span> <span class=o>=</span> <span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>,</span>
    <span class=n>contentDescription</span> <span class=o>=</span> <span class=kc>null</span> <span class=c1>// Avoid `null` and set this to a localized string if possible.</span>
<span class=p>)</span>

<span class=c1>// Draw the image with a circle crop, crossfade, and overwrite the `loading` state.</span>
<span class=n>AsyncImage</span><span class=p>(</span>
    <span class=n>model</span> <span class=o>=</span> <span class=n>ImageRequest</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>LocalContext</span><span class=p>.</span><span class=na>current</span><span class=p>)</span>
        <span class=p>.</span><span class=na>data</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span>
        <span class=p>.</span><span class=na>crossfade</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
        <span class=p>.</span><span class=na>build</span><span class=p>(),</span>
    <span class=n>contentDescription</span> <span class=o>=</span> <span class=kc>null</span><span class=p>,</span>
    <span class=n>modifier</span> <span class=o>=</span> <span class=n>Modifier</span>
        <span class=p>.</span><span class=na>clip</span><span class=p>(</span><span class=n>CircleShape</span><span class=p>),</span>
    <span class=n>loading</span> <span class=o>=</span> <span class=p>{</span>
        <span class=n>CircularProgressIndicator</span><span class=p>()</span>
    <span class=p>},</span>
    <span class=n>contentScale</span> <span class=o>=</span> <span class=n>ContentScale</span><span class=p>.</span><span class=na>Crop</span>
<span class=p>)</span>

<span class=c1>// Draw the image with a circle crop, crossfade, and overwrite all states.</span>
<span class=n>AsyncImage</span><span class=p>(</span>
    <span class=n>model</span> <span class=o>=</span> <span class=n>ImageRequest</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>LocalContext</span><span class=p>.</span><span class=na>current</span><span class=p>)</span>
        <span class=p>.</span><span class=na>data</span><span class=p>(</span><span class=s>&quot;https://example.com/image.jpg&quot;</span><span class=p>)</span>
        <span class=p>.</span><span class=na>crossfade</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
        <span class=p>.</span><span class=na>build</span><span class=p>(),</span>
    <span class=n>contentDescription</span> <span class=o>=</span> <span class=kc>null</span><span class=p>,</span>
    <span class=n>modifier</span> <span class=o>=</span> <span class=n>Modifier</span>
        <span class=p>.</span><span class=na>clip</span><span class=p>(</span><span class=n>CircleShape</span><span class=p>),</span>
    <span class=n>contentScale</span> <span class=o>=</span> <span class=n>ContentScale</span><span class=p>.</span><span class=na>Crop</span>
<span class=p>)</span> <span class=p>{</span> <span class=n>state</span> <span class=o>-&gt;</span>
    <span class=k>if</span> <span class=p>(</span><span class=n>state</span> <span class=k>is</span> <span class=n>AsyncImagePainter</span><span class=p>.</span><span class=na>State</span><span class=p>.</span><span class=na>Loading</span><span class=p>)</span> <span class=p>{</span>
        <span class=n>CircularProgressIndicator</span><span class=p>()</span>
    <span class=p>}</span> <span class=k>else</span> <span class=p>{</span>
        <span class=n>AsyncImageContent</span><span class=p>()</span> <span class=c1>// Draws the image.</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <ul> <li><strong>Important</strong>: Rename <code>ImagePainter</code> to <code>AsyncImagePainter</code> and <code>rememberImagePainter</code> to <code>rememberAsyncImagePainter</code>.<ul> <li><code>ExecuteCallback</code> is no longer supported. To have the <code>AsyncImagePainter</code> skip waiting for <code>onDraw</code> to be called, set <code>ImageRequest.size(OriginalSize)</code> (or any size) instead.</li> <li>Add an optional <code>FilterQuality</code> argument to <code>rememberAsyncImagePainter</code>.</li> </ul> </li> <li>Use coroutines for cleanup operations in <code>DiskLruCache</code> and add <code>DiskLruCache.Builder.cleanupDispatcher</code>.</li> <li>Fix Compose preview for placeholder set using <code>ImageLoader.Builder.placeholder</code>.</li> <li>Mark <code>LocalImageLoader.current</code> with <code>@ReadOnlyComposable</code> to generate more efficient code.</li> <li>Update Compose to 1.1.0-beta03 and depend on <code>compose.foundation</code> instead of <code>compose.ui</code>.</li> <li>Update <code>androidx.appcompat-resources</code> to 1.4.0.</li> </ul> <h2 id=200-alpha03-november-12-2021>[2.0.0-alpha03] - November 12, 2021<a class=headerlink href=#200-alpha03-november-12-2021 title="Permanent link">&para;</a></h2> <ul> <li>Add ability to load music thumbnails on Android 29+. (<a href=https://github.com/coil-kt/coil/pull/967>#967</a>)</li> <li>Fix: Use <code>context.resources</code> to load resources for current package. (<a href=https://github.com/coil-kt/coil/pull/968>#968</a>)</li> <li>Fix: <code>clear</code> -&gt; <code>dispose</code> replacement expression. (<a href=https://github.com/coil-kt/coil/pull/970>#970</a>)</li> <li>Update Compose to 1.0.5.</li> <li>Update <code>accompanist-drawablepainter</code> to 0.20.2.</li> <li>Update Okio to 3.0.0.</li> <li>Update <code>androidx.annotation</code> to 1.3.0.</li> <li>Update <code>androidx.core</code> to 1.7.0.</li> <li>Update <code>androidx.lifecycle</code> to 2.4.0.<ul> <li>Remove dependency on <code>lifecycle-common-java8</code> as it's been merged into <code>lifecycle-common</code>.</li> </ul> </li> </ul> <h2 id=200-alpha02-october-24-2021>[2.0.0-alpha02] - October 24, 2021<a class=headerlink href=#200-alpha02-october-24-2021 title="Permanent link">&para;</a></h2> <ul> <li>Add a new <code>coil-bom</code> artifact which includes a <a href=https://docs.gradle.org/7.2/userguide/platforms.html#sub:bom_import>bill of materials</a>.<ul> <li>Importing <code>coil-bom</code> allows you to depend on other Coil artifacts without specifying a version.</li> </ul> </li> <li>Fix failing to load an image when using <code>ExecuteCallback.Immediate</code>.</li> <li>Update Okio to 3.0.0-alpha.11.<ul> <li>This also resolves a compatibility issue with Okio 3.0.0-alpha.11.</li> </ul> </li> <li>Update Kotlin to 1.5.31.</li> <li>Update Compose to 1.0.4.</li> </ul> <h2 id=200-alpha01-october-11-2021>[2.0.0-alpha01] - October 11, 2021<a class=headerlink href=#200-alpha01-october-11-2021 title="Permanent link">&para;</a></h2> <p>Coil 2.0.0 is the next major iteration of the library and has new features, performance improvements, API improvements, and various bug fixes. This release may be binary/source incompatible with future alpha releases until the stable release of 2.0.0.</p> <ul> <li><strong>Important</strong>: The minimum supported API is now 21.</li> <li><strong>Important</strong>: Enable <code>-Xjvm-default=all</code>.<ul> <li>This generates Java 8 default methods instead of using Kotlin's default interface method support. Check out <a href=https://blog.jetbrains.com/kotlin/2020/07/kotlin-1-4-m3-generating-default-methods-in-interfaces/ >this blog post</a> for more information.</li> <li><strong>You'll need to add <code>-Xjvm-default=all</code> or <code>-Xjvm-default=all-compatibility</code> to your build file as well.</strong> See <a href=https://coil-kt.github.io/coil/getting_started/#java-8>here</a> for how to do this.</li> </ul> </li> <li><strong>Important</strong>: Coil now has its own disk cache implementation and no longer relies on OkHttp for disk caching.<ul> <li>This change was made to:<ul> <li>Better support thread interruption while decoding images. This improves performance when image requests are started and stopped in quick succession.</li> <li>Support exposing <code>ImageSource</code>s backed by <code>File</code>s. This avoids unnecessary copying when an Android API requires a <code>File</code> to decode (e.g. <code>MediaMetadataRetriever</code>).</li> <li>Support reading from/writing to the disk cache files directly.</li> </ul> </li> <li>Use <code>ImageLoader.Builder.diskCache</code> and <code>DiskCache.Builder</code> to configure the disk cache.</li> <li>You <strong>should not</strong> use OkHttp's <code>Cache</code> with Coil 2.0 as it can be corrupted if it's interrupted while writing to it.</li> <li><code>Cache-Control</code> and other cache headers are still supported - except <code>Vary</code> headers, as the cache only checks that the URLs match. Additionally, only responses with a response code in the range [200..300) are cached.</li> <li>Support for cache headers can be enabled or disabled using <code>ImageLoader.Builder.respectCacheHeaders</code>.</li> <li>Your existing disk cache will be cleared and rebuilt when upgrading to 2.0.</li> </ul> </li> <li><strong>Important</strong>: <code>ImageRequest</code>'s default <code>Scale</code> is now <code>Scale.FIT</code><ul> <li>This was changed to make <code>ImageRequest.scale</code> consistent with other classes that have a default <code>Scale</code>.</li> <li>Requests with an <code>ImageViewTarget</code> still have their scale autodetected.</li> </ul> </li> <li>Significant changes to the image pipeline classes:<ul> <li><code>Mapper</code>, <code>Fetcher</code>, and <code>Decoder</code> have been refactored to be more flexible.</li> <li><code>Fetcher.key</code> has been replaced with a new <code>Keyer</code> interface. <code>Keyer</code> creates the cache key from the input data.</li> <li>Adds <code>ImageSource</code>, which allows <code>Decoder</code>s to decode <code>File</code>s directly.</li> </ul> </li> <li><code>BitmapPool</code> and <code>PoolableViewTarget</code> have been removed from the library. Bitmap pooling was removed because:<ul> <li>It's most effective on &lt;= API 23 and has become less effective with newer Android releases.</li> <li>Removing bitmap pooling allows Coil to use immutable bitmaps, which have performance benefits.</li> <li>There's runtime overhead to manage the bitmap pool.</li> <li>Bitmap pooling creates design restrictions on Coil's API as it requires tracking if a bitmap is eligible for pooling. Removing bitmap pooling allows Coil to expose the result <code>Drawable</code> in more places (e.g. <code>Listener</code>, <code>Disposable</code>). Additionally, this means Coil doesn't have to clear <code>ImageView</code>s, which has can cause <a href=https://github.com/coil-kt/coil/issues/650>issues</a>.</li> <li>Bitmap pooling is <a href=https://github.com/coil-kt/coil/issues/546>error-prone</a>. Allocating a new bitmap is much safer than attempting to re-use a bitmap that could still be in use.</li> </ul> </li> <li><code>MemoryCache</code> has been refactored to be more flexible.</li> <li>Disable generating runtime not-null assertions.<ul> <li>If you use Java, passing null as a not-null annotated parameter to a function will no longer throw a <code>NullPointerException</code> immediately. If you use Kotlin, there is essentially no change.</li> <li>This change allows the library's size to be smaller.</li> </ul> </li> <li><code>VideoFrameFileFetcher</code> and <code>VideoFrameUriFetcher</code> are removed from the library. Use <code>VideoFrameDecoder</code> instead, which supports all data sources.</li> <li>Adds support for <code>bitmapFactoryMaxParallelism</code>, which restricts the maximum number of in-progress <code>BitmapFactory</code> operations. This value is 4 by default, which improves UI performance.</li> <li>Adds support for <code>interceptorDispatcher</code>, <code>fetcherDispatcher</code>, <code>decoderDispatcher</code>, and <code>transformationDispatcher</code>.</li> <li><code>Disposable</code> has been refactored and exposes the underlying <code>ImageRequest</code>'s job.</li> <li>Change <code>Transition.transition</code> to be a non-suspending function as it's no longer needed to suspend the transition until it completes.</li> <li>Add <code>GenericViewTarget</code>, which handles common <code>ViewTarget</code> logic.</li> <li><a href=https://github.com/coil-kt/coil/blob/845f39383f332428077c666e3567b954675ce248/coil-base/src/main/java/coil/transform/BlurTransformation.kt><code>BlurTransformation</code></a> and <a href=https://github.com/coil-kt/coil/blob/845f39383f332428077c666e3567b954675ce248/coil-base/src/main/java/coil/transform/GrayscaleTransformation.kt><code>GrayscaleTransformation</code></a> are removed from the library.<ul> <li>If you use them, you can copy their code into your project.</li> </ul> </li> <li><code>ImageRequest.error</code> is now set on the <code>Target</code> if <code>ImageRequest.fallback</code> is null.</li> <li><code>Transformation.key</code> is replaced with <code>Transformation.cacheKey</code>.</li> <li><code>ImageRequest.Listener</code> returns <code>SuccessResult</code>/<code>ErrorResult</code> in <code>onSuccess</code> and <code>onError</code> respectively.</li> <li>Add <code>ByteBuffer</code>s to the default supported data types.</li> <li>Remove <code>toString</code> implementations from several classes.</li> <li>Update OkHttp to 4.9.2.</li> <li>Update Okio to 3.0.0-alpha.10.</li> </ul> <h2 id=140-october-6-2021>[1.4.0] - October 6, 2021<a class=headerlink href=#140-october-6-2021 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: Add <code>ImageResult</code> to <code>ImagePainter.State.Success</code> and <code>ImagePainter.State.Error</code>. (<a href=https://github.com/coil-kt/coil/pull/887>#887</a>)<ul> <li>This is a binary incompatible change to the signatures of <code>ImagePainter.State.Success</code> and <code>ImagePainter.State.Error</code>, however these APIs are marked as experimental.</li> </ul> </li> <li>Only execute <code>CrossfadeTransition</code> if <code>View.isShown</code> is <code>true</code>. Previously it would only check <code>View.isVisible</code>. (<a href=https://github.com/coil-kt/coil/pull/898>#898</a>)</li> <li>Fix potential memory cache miss if scaling multiplier is slightly less than 1 due to a rounding issue. (<a href=https://github.com/coil-kt/coil/pull/899>#899</a>)</li> <li>Make non-inlined <code>ComponentRegistry</code> methods public. (<a href=https://github.com/coil-kt/coil/pull/925>#925</a>)</li> <li>Depend on <code>accompanist-drawablepainter</code> and remove Coil's custom <code>DrawablePainter</code> implementation. (<a href=https://github.com/coil-kt/coil/pull/845>#845</a>)</li> <li>Remove use of a Java 8 method to guard against desugaring issue. (<a href=https://github.com/coil-kt/coil/pull/924>#924</a>)</li> <li>Promote <code>ImagePainter.ExecuteCallback</code> to stable API. (<a href=https://github.com/coil-kt/coil/pull/927>#927</a>)</li> <li>Update compileSdk to 31.</li> <li>Update Kotlin to 1.5.30.</li> <li>Update Coroutines to 1.5.2.</li> <li>Update Compose to 1.0.3.</li> </ul> <h2 id=132-august-4-2021>[1.3.2] - August 4, 2021<a class=headerlink href=#132-august-4-2021 title="Permanent link">&para;</a></h2> <ul> <li><code>coil-compose</code> now depends on <code>compose.ui</code> instead of <code>compose.foundation</code>.<ul> <li><code>compose.ui</code> is a smaller dependency as it's a subset of <code>compose.foundation</code>.</li> </ul> </li> <li>Update Jetpack Compose to 1.0.1.</li> <li>Update Kotlin to 1.5.21.</li> <li>Update Coroutines to 1.5.1.</li> <li>Update <code>androidx.exifinterface:exifinterface</code> to 1.3.3.</li> </ul> <h2 id=131-july-28-2021>[1.3.1] - July 28, 2021<a class=headerlink href=#131-july-28-2021 title="Permanent link">&para;</a></h2> <ul> <li>Update Jetpack Compose to <code>1.0.0</code>. Huge congrats to the Compose team on the <a href=https://android-developers.googleblog.com/2021/07/jetpack-compose-announcement.html>stable release</a>!</li> <li>Update <code>androidx.appcompat:appcompat-resources</code> to 1.3.1.</li> </ul> <h2 id=130-july-10-2021>[1.3.0] - July 10, 2021<a class=headerlink href=#130-july-10-2021 title="Permanent link">&para;</a></h2> <ul> <li><strong>New</strong>: Add support for <a href=https://developer.android.com/jetpack/compose>Jetpack Compose</a>. It's based on <a href=https://github.com/google/accompanist/ >Accompanist</a>'s Coil integration, but has a number of changes. Check out <a href=https://coil-kt.github.io/coil/compose/ >the docs</a> for more info.</li> <li>Add <code>allowConversionToBitmap</code> to enable/disable the automatic bitmap conversion for <code>Transformation</code>s. (<a href=https://github.com/coil-kt/coil/pull/775>#775</a>)</li> <li>Add <code>enforceMinimumFrameDelay</code> to <code>ImageDecoderDecoder</code> and <code>GifDecoder</code> to enable rewriting a GIF's frame delay if it's below a threshold. (<a href=https://github.com/coil-kt/coil/pull/783>#783</a>)<ul> <li>This is disabled by default, but will be enabled by default in a future release.</li> </ul> </li> <li>Add support for enabling/disabling an <code>ImageLoader</code>'s internal network observer. (<a href=https://github.com/coil-kt/coil/pull/741>#741</a>)</li> <li>Fix the density of bitmaps decoded by <code>BitmapFactoryDecoder</code>. (<a href=https://github.com/coil-kt/coil/pull/776>#776</a>)</li> <li>Fix Licensee not finding Coil's licence url. (<a href=https://github.com/coil-kt/coil/pull/774>#774</a>)</li> <li>Update <code>androidx.core:core-ktx</code> to 1.6.0.</li> </ul> <h2 id=122-june-4-2021>[1.2.2] - June 4, 2021<a class=headerlink href=#122-june-4-2021 title="Permanent link">&para;</a></h2> <ul> <li>Fix race condition while converting a drawable with shared state to a bitmap. (<a href=https://github.com/coil-kt/coil/pull/771>#771</a>)</li> <li>Fix <code>ImageLoader.Builder.fallback</code> setting the <code>error</code> drawable instead of the <code>fallback</code> drawable.</li> <li>Fix incorrect data source returned by <code>ResourceUriFetcher</code>. (<a href=https://github.com/coil-kt/coil/pull/770>#770</a>)</li> <li>Fix log check for no available file descriptors on API 26 and 27.</li> <li>Fix incorrect version check for platform vector drawable support. (<a href=https://github.com/coil-kt/coil/pull/751>#751</a>)</li> <li>Update Kotlin (1.5.10).</li> <li>Update Coroutines (1.5.0).</li> <li>Update <code>androidx.appcompat:appcompat-resources</code> to 1.3.0.</li> <li>Update <code>androidx.core:core-ktx</code> to 1.5.0.</li> </ul> <h2 id=121-april-27-2021>[1.2.1] - April 27, 2021<a class=headerlink href=#121-april-27-2021 title="Permanent link">&para;</a></h2> <ul> <li>Fix <code>VideoFrameUriFetcher</code> attempting to handle http/https URIs. (<a href=https://github.com/coil-kt/coil/pull/734>#734</a></li> </ul> <h2 id=120-april-12-2021>[1.2.0] - April 12, 2021<a class=headerlink href=#120-april-12-2021 title="Permanent link">&para;</a></h2> <ul> <li><strong>Important</strong>: Use an SVG's view bounds to calculate its aspect ratio in <code>SvgDecoder</code>. (<a href=https://github.com/coil-kt/coil/pull/688>#688</a>)</li> <li>Previously, <code>SvgDecoder</code> used an SVG's <code>width</code>/<code>height</code> elements to determine its aspect ratio, however this doesn't correctly follow the SVG specification.</li> <li>To revert to the old behaviour set <code>useViewBoundsAsIntrinsicSize = false</code> when constructing your <code>SvgDecoder</code>.</li> <li><strong>New</strong>: Add <code>VideoFrameDecoder</code> to support decoding video frames from any source. (<a href=https://github.com/coil-kt/coil/pull/689>#689</a>)</li> <li><strong>New</strong>: Support automatic SVG detection using the source's contents instead of just the MIME type. (<a href=https://github.com/coil-kt/coil/pull/654>#654</a>)</li> <li><strong>New</strong>: Support sharing resources using <code>ImageLoader.newBuilder()</code>. (<a href=https://github.com/coil-kt/coil/pull/653>#653</a>)</li> <li>Importantly, this enables sharing memory caches between <code>ImageLoader</code> instances.</li> <li><strong>New</strong>: Add support for animated image transformations using <code>AnimatedTransformation</code>. (<a href=https://github.com/coil-kt/coil/pull/659>#659</a>)</li> <li><strong>New</strong>: Add support for start/end callbacks for animated drawables. (<a href=https://github.com/coil-kt/coil/pull/676>#676</a>)</li> </ul> <hr> <ul> <li>Fix parsing EXIF data for HEIF/HEIC files. (<a href=https://github.com/coil-kt/coil/pull/664>#664</a>)</li> <li>Fix not using the <code>EmptyBitmapPool</code> implementation if bitmap pooling is disabled. (<a href=https://github.com/coil-kt/coil/pull/638>#638</a>)</li> <li>Without this fix bitmap pooling was still disabled properly, however it used a more heavyweight <code>BitmapPool</code> implementation.</li> <li>Fix case where <code>MovieDrawable.getOpacity</code> would incorrectly return transparent. (<a href=https://github.com/coil-kt/coil/pull/682>#682</a>)</li> <li>Guard against the default temporary directory not existing. (<a href=https://github.com/coil-kt/coil/pull/683>#683</a>)</li> </ul> <hr> <ul> <li>Build using the JVM IR backend. (<a href=https://github.com/coil-kt/coil/pull/670>#670</a>)</li> <li>Update Kotlin (1.4.32).</li> <li>Update Coroutines (1.4.3).</li> <li>Update OkHttp (3.12.13).</li> <li>Update <code>androidx.lifecycle:lifecycle-common-java8</code> to 2.3.1.</li> </ul> <h2 id=111-january-11-2021>[1.1.1] - January 11, 2021<a class=headerlink href=#111-january-11-2021 title="Permanent link">&para;</a></h2> <ul> <li>Fix a case where <code>ViewSizeResolver.size</code> could throw an <code>IllegalStateException</code> due to resuming a coroutine more than once.</li> <li>Fix <code>HttpFetcher</code> blocking forever if called from the main thread.<ul> <li>Requests that are forced to execute on the main thread using <code>ImageRequest.dispatcher(Dispatchers.Main.immediate)</code> will fail with a <code>NetworkOnMainThreadException</code> unless <code>ImageRequest.networkCachePolicy</code> is set to <code>CachePolicy.DISABLED</code> or <code>CachePolicy.WRITE_ONLY</code>.</li> </ul> </li> <li>Rotate video frames from <code>VideoFrameFetcher</code> if the video has rotation metadata.</li> <li>Update Kotlin (1.4.21).</li> <li>Update Coroutines (1.4.2).</li> <li>Update Okio (2.10.0).</li> <li>Update <code>androidx.exifinterface:exifinterface</code> (1.3.2).</li> </ul> <h2 id=110-november-24-2020>[1.1.0] - November 24, 2020<a class=headerlink href=#110-november-24-2020 title="Permanent link">&para;</a></h2> <ul> <li><strong>Important</strong>: Change the <code>CENTER</code> and <code>MATRIX</code> <code>ImageView</code> scale types to resolve to <code>OriginalSize</code>. (<a href=https://github.com/coil-kt/coil/pull/587>#587</a>)<ul> <li>This change only affects the implicit size resolution algorithm when the request's size isn't specified explicitly.</li> <li>This change was made to ensure that the visual result of an image request is consistent with <code>ImageView.setImageResource</code>/<code>ImageView.setImageURI</code>. To revert to the old behaviour set a <code>ViewSizeResolver</code> when constructing your request.</li> </ul> </li> <li><strong>Important</strong>: Return the display size from <code>ViewSizeResolver</code> if the view's layout param is <code>WRAP_CONTENT</code>. (<a href=https://github.com/coil-kt/coil/pull/562>#562</a>)<ul> <li>Previously, we would only return the display size if the view has been fully laid out. This change makes the typical behaviour more consistent and intuitive.</li> </ul> </li> <li>Add the ability to control alpha pre-multiplication. (<a href=https://github.com/coil-kt/coil/pull/569>#569</a>)</li> <li>Support preferring exact intrinsic size in <code>CrossfadeDrawable</code>. (<a href=https://github.com/coil-kt/coil/pull/585>#585</a>)</li> <li>Check for the full GIF header including version. (<a href=https://github.com/coil-kt/coil/pull/564>#564</a>)</li> <li>Add an empty bitmap pool implementation. (<a href=https://github.com/coil-kt/coil/pull/561>#561</a>)</li> <li>Make <code>EventListener.Factory</code> a functional interface. (<a href=https://github.com/coil-kt/coil/pull/575>#575</a>)</li> <li>Stabilize <code>EventListener</code>. (<a href=https://github.com/coil-kt/coil/pull/574>#574</a>)</li> <li>Add <code>String</code> overload for <code>ImageRequest.Builder.placeholderMemoryCacheKey</code>.</li> <li>Add <code>@JvmOverloads</code> to the <code>ViewSizeResolver</code> constructor.</li> <li>Fix: Mutate start/end drawables in <code>CrossfadeDrawable</code>. (<a href=https://github.com/coil-kt/coil/pull/572>#572</a>)</li> <li>Fix: Fix GIF not playing on second load. (<a href=https://github.com/coil-kt/coil/pull/534>#577</a>)</li> <li>Update Kotlin (1.4.20) and migrate to the <code>kotlin-parcelize</code> plugin.</li> <li>Update Coroutines (1.4.1).</li> </ul> <h2 id=100-october-22-2020>[1.0.0] - October 22, 2020<a class=headerlink href=#100-october-22-2020 title="Permanent link">&para;</a></h2> <p>Changes since <code>0.13.0</code>: - Add <code>Context.imageLoader</code> extension function. (<a href=https://github.com/coil-kt/coil/pull/534>#534</a>) - Add <code>ImageLoader.executeBlocking</code> extension function. (<a href=https://github.com/coil-kt/coil/pull/537>#537</a>) - Don't shutdown previous singleton image loader if replaced. (<a href=https://github.com/coil-kt/coil/pull/533>#533</a>)</p> <p>Changes since <code>1.0.0-rc3</code>: - Fix: Guard against missing/invalid ActivityManager. (<a href=https://github.com/coil-kt/coil/pull/541>#541</a>) - Fix: Allow OkHttp to cache unsuccessful responses. (<a href=https://github.com/coil-kt/coil/pull/551>#551</a>) - Update Kotlin to 1.4.10. - Update Okio to 2.9.0. - Update <code>androidx.exifinterface:exifinterface</code> to 1.3.1.</p> <h2 id=100-rc3-september-21-2020>[1.0.0-rc3] - September 21, 2020<a class=headerlink href=#100-rc3-september-21-2020 title="Permanent link">&para;</a></h2> <ul> <li>Revert using the <a href=https://blog.jetbrains.com/kotlin/2020/07/kotlin-1-4-m3-generating-default-methods-in-interfaces/ ><code>-Xjvm-default=all</code></a> compiler flag due to instability.<ul> <li><strong>This is a source compatible, but binary incompatible change from previous release candidate versions.</strong></li> </ul> </li> <li>Add <code>Context.imageLoader</code> extension function. (<a href=https://github.com/coil-kt/coil/pull/534>#534</a>)</li> <li>Add <code>ImageLoader.executeBlocking</code> extension function. (<a href=https://github.com/coil-kt/coil/pull/537>#537</a>)</li> <li>Don't shutdown previous singleton image loader if replaced. (<a href=https://github.com/coil-kt/coil/pull/533>#533</a>)</li> <li>Update AndroidX dependencies:<ul> <li><code>androidx.exifinterface:exifinterface</code> -&gt; 1.3.0</li> </ul> </li> </ul> <h2 id=100-rc2-september-3-2020>[1.0.0-rc2] - September 3, 2020<a class=headerlink href=#100-rc2-september-3-2020 title="Permanent link">&para;</a></h2> <ul> <li><strong>This release requires Kotlin 1.4.0 or above.</strong></li> <li>All the changes present in <a href=#0130---september-3-2020>0.13.0</a>.</li> <li>Depend on the base Kotlin <code>stdlib</code> instead of <code>stdlib-jdk8</code>.</li> </ul> <h2 id=0130-september-3-2020>[0.13.0] - September 3, 2020<a class=headerlink href=#0130-september-3-2020 title="Permanent link">&para;</a></h2> <ul> <li><strong>Important</strong>: Launch the Interceptor chain on the main thread by default. (<a href=https://github.com/coil-kt/coil/pull/513>#513</a>)<ul> <li>This largely restores the behaviour from <code>0.11.0</code> and below where the memory cache would be checked synchronously on the main thread.</li> <li>To revert to using the same behaviour as <code>0.12.0</code> where the memory cache is checked on <code>ImageRequest.dispatcher</code>, set <code>ImageLoader.Builder.launchInterceptorChainOnMainThread(false)</code>.</li> <li>See <a href=https://coil-kt.github.io/coil/api/coil-base/coil/-image-loader/-builder/launch-interceptor-chain-on-main-thread/ ><code>launchInterceptorChainOnMainThread</code></a> for more information.</li> </ul> </li> </ul> <hr> <ul> <li>Fix: Fix potential memory leak if request is started on a <code>ViewTarget</code> in a detached fragment. (<a href=https://github.com/coil-kt/coil/pull/518>#518</a>)</li> <li>Fix: Use <code>ImageRequest.context</code> to load resource URIs. (<a href=https://github.com/coil-kt/coil/pull/517>#517</a>)</li> <li>Fix: Fix race condition that could cause subsequent requests to not be saved to the disk cache. (<a href=https://github.com/coil-kt/coil/pull/510>#510</a>)</li> <li>Fix: Use <code>blockCountLong</code> and <code>blockSizeLong</code> on API 18.</li> </ul> <hr> <ul> <li>Make <code>ImageLoaderFactory</code> a fun interface.</li> <li>Add <code>ImageLoader.Builder.addLastModifiedToFileCacheKey</code> which allows you to enable/disable adding the last modified timestamp to the memory cache key for an image loaded from a <code>File</code>.</li> </ul> <hr> <ul> <li>Update Kotlin to 1.4.0.</li> <li>Update Coroutines to 1.3.9.</li> <li>Update Okio to 2.8.0.</li> </ul> <h2 id=100-rc1-august-18-2020>[1.0.0-rc1] - August 18, 2020<a class=headerlink href=#100-rc1-august-18-2020 title="Permanent link">&para;</a></h2> <ul> <li><strong>This release requires Kotlin 1.4.0 or above.</strong></li> <li>Update Kotlin to 1.4.0 and enable <a href=https://blog.jetbrains.com/kotlin/2020/07/kotlin-1-4-m3-generating-default-methods-in-interfaces/ ><code>-Xjvm-default=all</code></a>.<ul> <li><strong><a href=https://coil-kt.github.io/coil/getting_started/#java-8>See here</a> for how to enable <code>-Xjvm-default=all</code> in your build file.</strong></li> <li>This generates Java 8 default methods for default Kotlin interface methods.</li> </ul> </li> <li>Remove all existing deprecated methods in 0.12.0.</li> <li>Update Coroutines to 1.3.9.</li> </ul> <h2 id=0120-august-18-2020>[0.12.0] - August 18, 2020<a class=headerlink href=#0120-august-18-2020 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: <code>LoadRequest</code> and <code>GetRequest</code> have been replaced with <code>ImageRequest</code>:<ul> <li><code>ImageLoader.execute(LoadRequest)</code> -&gt; <code>ImageLoader.enqueue(ImageRequest)</code></li> <li><code>ImageLoader.execute(GetRequest)</code> -&gt; <code>ImageLoader.execute(ImageRequest)</code></li> <li><code>ImageRequest</code> implements <code>equals</code>/<code>hashCode</code>.</li> </ul> </li> <li><strong>Breaking</strong>: A number of classes were renamed and/or changed package:<ul> <li><code>coil.request.RequestResult</code> -&gt; <code>coil.request.ImageResult</code></li> <li><code>coil.request.RequestDisposable</code> -&gt; <code>coil.request.Disposable</code></li> <li><code>coil.bitmappool.BitmapPool</code> -&gt; <code>coil.bitmap.BitmapPool</code></li> <li><code>coil.DefaultRequestOptions</code> -&gt; <code>coil.request.DefaultRequestOptions</code></li> </ul> </li> <li><strong>Breaking</strong>: <a href=https://github.com/coil-kt/coil/blob/f52addd039f0195b66f93cb0f1cad59b0832f784/coil-base/src/main/java/coil/collection/SparseIntArraySet.kt><code>SparseIntArraySet</code></a> has been removed from the public API.</li> <li><strong>Breaking</strong>: <code>TransitionTarget</code> no longer implements <code>ViewTarget</code>.</li> <li><strong>Breaking</strong>: <code>ImageRequest.Listener.onSuccess</code>'s signature has changed to return an <code>ImageResult.Metadata</code> instead of just a <code>DataSource</code>.</li> <li><strong>Breaking</strong>: Remove support for <code>LoadRequest.aliasKeys</code>. This API is better handled with direct read/write access to the memory cache.</li> </ul> <hr> <ul> <li><strong>Important</strong>: Values in the memory cache are no longer resolved synchronously (if called from the main thread).<ul> <li>This change was also necessary to support executing <code>Interceptor</code>s on a background dispatcher.</li> <li>This change also moves more work off the main thread, improving performance.</li> </ul> </li> <li><strong>Important</strong>: <code>Mappers</code> are now executed on a background dispatcher. As a side effect, automatic bitmap sampling is no longer <strong>automatically</strong> supported. To achieve the same effect, use the <code>MemoryCache.Key</code> of a previous request as the <code>placeholderMemoryCacheKey</code> of the subsequent request. <a href=https://coil-kt.github.io/coil/recipes/#using-a-memory-cache-key-as-a-placeholder>See here for an example</a>.<ul> <li>The <code>placeholderMemoryCacheKey</code> API offers more freedom as you can "link" two image requests with different data (e.g. different URLs for small/large images).</li> </ul> </li> <li><strong>Important</strong>: Coil's <code>ImageView</code> extension functions have been moved from the <code>coil.api</code> package to the <code>coil</code> package.<ul> <li>Use find + replace to refactor <code>import coil.api.load</code> -&gt; <code>import coil.load</code>. Unfortunately, it's not possible to use Kotlin's <code>ReplaceWith</code> functionality to replace imports.</li> </ul> </li> <li><strong>Important</strong>: Use standard crossfade if drawables are not the same image.</li> <li><strong>Important</strong>: Prefer immutable bitmaps on API 24+.</li> <li><strong>Important</strong>: <code>MeasuredMapper</code> has been deprecated in favour of the new <code>Interceptor</code> interface. See <a href=https://gist.github.com/colinrtwhite/90267704091467451e46b21b95154299>here</a> for an example of how to convert a <code>MeasuredMapper</code> into an <code>Interceptor</code>.<ul> <li><code>Interceptor</code> is a much less restrictive API that allows for a wider range of custom logic.</li> </ul> </li> <li><strong>Important</strong>: <code>ImageRequest.data</code> is now not null. If you create an <code>ImageRequest</code> without setting its data it will return <code>NullRequestData</code> as its data.</li> </ul> <hr> <ul> <li><strong>New</strong>: Add support for direct read/write access to an <code>ImageLoader</code>'s <code>MemoryCache</code>. See <a href=https://coil-kt.github.io/coil/getting_started/#memory-cache>the docs</a> for more information.</li> <li><strong>New</strong>: Add support for <code>Interceptor</code>s. See <a href=https://coil-kt.github.io/coil/image_pipeline/#interceptors>the docs</a> for more information. Coil's <code>Interceptor</code> design is heavily inspired by <a href=https://github.com/square/okhttp>OkHttp</a>'s!</li> <li><strong>New</strong>: Add the ability to enable/disable bitmap pooling using <code>ImageLoader.Builder.bitmapPoolingEnabled</code>.<ul> <li>Bitmap pooling is most effective on API 23 and below, but may still be benificial on API 24 and up (by eagerly calling <code>Bitmap.recycle</code>).</li> </ul> </li> <li><strong>New</strong>: Support thread interruption while decoding.</li> </ul> <hr> <ul> <li>Fix parsing multiple segments in content-type header.</li> <li>Rework bitmap reference counting to be more robust.</li> <li>Fix WebP decoding on API &lt; 19 devices.</li> <li>Expose FetchResult and DecodeResult in the EventListener API.</li> </ul> <hr> <ul> <li>Compile with SDK 30.</li> <li>Update Coroutines to 1.3.8.</li> <li>Update OkHttp to 3.12.12.</li> <li>Update Okio to 2.7.0.</li> <li>Update AndroidX dependencies:<ul> <li><code>androidx.appcompat:appcompat-resources</code> -&gt; 1.2.0</li> <li><code>androidx.core:core-ktx</code> -&gt; 1.3.1</li> </ul> </li> </ul> <h2 id=0110-may-14-2020>[0.11.0] - May 14, 2020<a class=headerlink href=#0110-may-14-2020 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: <strong>This version removes all existing deprecated functions.</strong><ul> <li>This enables removing Coil's <code>ContentProvider</code> so it doesn't run any code at app startup.</li> </ul> </li> <li><strong>Breaking</strong>: Convert <code>SparseIntArraySet.size</code> to a val. (<a href=https://github.com/coil-kt/coil/pull/380>#380</a>)</li> <li><strong>Breaking</strong>: Move <code>Parameters.count()</code> to an extension function. (<a href=https://github.com/coil-kt/coil/pull/403>#403</a>)</li> <li><strong>Breaking</strong>: Make <code>BitmapPool.maxSize</code> an Int. (<a href=https://github.com/coil-kt/coil/pull/404>#404</a>)</li> </ul> <hr> <ul> <li><strong>Important</strong>: Make <code>ImageLoader.shutdown()</code> optional (similar to <code>OkHttpClient</code>). (<a href=https://github.com/coil-kt/coil/pull/385>#385</a>)</li> </ul> <hr> <ul> <li>Fix: Fix AGP 4.1 compatibility. (<a href=https://github.com/coil-kt/coil/pull/386>#386</a>)</li> <li>Fix: Fix measuring GONE views. (<a href=https://github.com/coil-kt/coil/pull/397>#397</a>)</li> </ul> <hr> <ul> <li>Reduce the default memory cache size to 20%. (<a href=https://github.com/coil-kt/coil/pull/390>#390</a>)<ul> <li>To restore the existing behaviour set <code>ImageLoaderBuilder.availableMemoryPercentage(0.25)</code> when creating your <code>ImageLoader</code>.</li> </ul> </li> <li>Update Coroutines to 1.3.6.</li> <li>Update OkHttp to 3.12.11.</li> </ul> <h2 id=0101-april-26-2020>[0.10.1] - April 26, 2020<a class=headerlink href=#0101-april-26-2020 title="Permanent link">&para;</a></h2> <ul> <li>Fix OOM when decoding large PNGs on API 23 and below. (<a href=https://github.com/coil-kt/coil/pull/372>#372</a>).<ul> <li>This disables decoding EXIF orientation for PNG files. PNG EXIF orientation is very rarely used and reading PNG EXIF data (even if it's empty) requires buffering the entire file into memory, which is bad for performance.</li> </ul> </li> <li>Minor Java compatibility improvements to <code>SparseIntArraySet</code>.</li> </ul> <hr> <ul> <li>Update Okio to 2.6.0.</li> </ul> <h2 id=0100-april-20-2020>[0.10.0] - April 20, 2020<a class=headerlink href=#0100-april-20-2020 title="Permanent link">&para;</a></h2> <h3 id=highlights>Highlights<a class=headerlink href=#highlights title="Permanent link">&para;</a></h3> <ul> <li> <p><strong>This version deprecates most of the DSL API in favour of using the builders directly.</strong> Here's what the change looks like:</p> <div class=highlight><pre><span></span><code><span class=c1>// 0.9.5 (old)</span>
<span class=kd>val</span> <span class=nv>imageLoader</span> <span class=o>=</span> <span class=n>ImageLoader</span><span class=p>(</span><span class=n>context</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>bitmapPoolPercentage</span><span class=p>(</span><span class=m>0.5</span><span class=p>)</span>
    <span class=n>crossfade</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
<span class=p>}</span>

<span class=kd>val</span> <span class=nv>disposable</span> <span class=o>=</span> <span class=n>imageLoader</span><span class=p>.</span><span class=na>load</span><span class=p>(</span><span class=n>context</span><span class=p>,</span> <span class=s>&quot;https://www.example.com/image.jpg&quot;</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>target</span><span class=p>(</span><span class=n>imageView</span><span class=p>)</span>
<span class=p>}</span>

<span class=kd>val</span> <span class=nv>drawable</span> <span class=o>=</span> <span class=n>imageLoader</span><span class=p>.</span><span class=na>get</span><span class=p>(</span><span class=s>&quot;https://www.example.com/image.jpg&quot;</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>size</span><span class=p>(</span><span class=m>512</span><span class=p>,</span> <span class=m>512</span><span class=p>)</span>
<span class=p>}</span>

<span class=c1>// 0.10.0 (new)</span>
<span class=kd>val</span> <span class=nv>imageLoader</span> <span class=o>=</span> <span class=n>ImageLoader</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
    <span class=p>.</span><span class=na>bitmapPoolPercentage</span><span class=p>(</span><span class=m>0.5</span><span class=p>)</span>
    <span class=p>.</span><span class=na>crossfade</span><span class=p>(</span><span class=kc>true</span><span class=p>)</span>
    <span class=p>.</span><span class=na>build</span><span class=p>()</span>

<span class=kd>val</span> <span class=nv>request</span> <span class=o>=</span> <span class=n>LoadRequest</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
    <span class=p>.</span><span class=na>data</span><span class=p>(</span><span class=s>&quot;https://www.example.com/image.jpg&quot;</span><span class=p>)</span>
    <span class=p>.</span><span class=na>target</span><span class=p>(</span><span class=n>imageView</span><span class=p>)</span>
    <span class=p>.</span><span class=na>build</span><span class=p>()</span>
<span class=kd>val</span> <span class=nv>disposable</span> <span class=o>=</span> <span class=n>imageLoader</span><span class=p>.</span><span class=na>execute</span><span class=p>(</span><span class=n>request</span><span class=p>)</span>

<span class=kd>val</span> <span class=nv>request</span> <span class=o>=</span> <span class=n>GetRequest</span><span class=p>.</span><span class=na>Builder</span><span class=p>(</span><span class=n>context</span><span class=p>)</span>
    <span class=p>.</span><span class=na>data</span><span class=p>(</span><span class=s>&quot;https://www.example.com/image.jpg&quot;</span><span class=p>)</span>
    <span class=p>.</span><span class=na>size</span><span class=p>(</span><span class=m>512</span><span class=p>,</span> <span class=m>512</span><span class=p>)</span>
    <span class=p>.</span><span class=na>build</span><span class=p>()</span>
<span class=kd>val</span> <span class=nv>drawable</span> <span class=o>=</span> <span class=n>imageLoader</span><span class=p>.</span><span class=na>execute</span><span class=p>(</span><span class=n>request</span><span class=p>).</span><span class=na>drawable</span>
</code></pre></div> <ul> <li>If you're using the <code>io.coil-kt:coil</code> artifact, you can call <code>Coil.execute(request)</code> to execute the request with the singleton <code>ImageLoader</code>.</li> </ul> </li> <li> <p><strong><code>ImageLoader</code>s now have a weak reference memory cache</strong> that tracks weak references to images once they're evicted from the strong reference memory cache.</p> <ul> <li>This means an image will always be returned from an <code>ImageLoader</code>'s memory cache if there's still a strong reference to it.</li> <li>Generally, this should make the memory cache much more predictable and increase its hit rate.</li> <li>This behaviour can be enabled/disabled with <code>ImageLoaderBuilder.trackWeakReferences</code>.</li> </ul> </li> <li> <p>Add a new artifact, <strong><code>io.coil-kt:coil-video</code></strong>, to decode specific frames from a video file. <a href=https://coil-kt.github.io/coil/videos/ >Read more here</a>.</p> </li> <li> <p>Add a new <a href=https://github.com/coil-kt/coil/blob/main/coil-base/src/main/java/coil/EventListener.kt>EventListener</a> API for tracking metrics.</p> </li> <li> <p>Add <a href=https://github.com/coil-kt/coil/blob/main/coil-singleton/src/main/java/coil/ImageLoaderFactory.kt>ImageLoaderFactory</a> which can be implemented by your <code>Application</code> to simplify singleton initialization.</p> </li> </ul> <hr> <h3 id=full-release-notes>Full Release Notes<a class=headerlink href=#full-release-notes title="Permanent link">&para;</a></h3> <ul> <li><strong>Important</strong>: Deprecate DSL syntax in favour of builder syntax. (<a href=https://github.com/coil-kt/coil/pull/267>#267</a>)</li> <li><strong>Important</strong>: Deprecate <code>Coil</code> and <code>ImageLoader</code> extension functions. (<a href=https://github.com/coil-kt/coil/pull/322>#322</a>)</li> <li><strong>Breaking</strong>: Return sealed <code>RequestResult</code> type from <code>ImageLoader.execute(GetRequest)</code>. (<a href=https://github.com/coil-kt/coil/pull/349>#349</a>)</li> <li><strong>Breaking</strong>: Rename <code>ExperimentalCoil</code> to <code>ExperimentalCoilApi</code>. Migrate from <code>@Experimental</code> to <code>@RequiresOptIn</code>. (<a href=https://github.com/coil-kt/coil/pull/306>#306</a>)</li> <li><strong>Breaking</strong>: Replace <code>CoilLogger</code> with <code>Logger</code> interface. (<a href=https://github.com/coil-kt/coil/pull/316>#316</a>)</li> <li><strong>Breaking</strong>: Rename destWidth/destHeight to dstWidth/dstHeight. (<a href=https://github.com/coil-kt/coil/pull/275>#275</a>)</li> <li><strong>Breaking</strong>: Re-arrange <code>MovieDrawable</code>'s constructor params. (<a href=https://github.com/coil-kt/coil/pull/272>#272</a>)</li> <li><strong>Breaking</strong>: <code>Request.Listener</code>'s methods now receive the full <code>Request</code> object instead of just its data.</li> <li><strong>Breaking</strong>: <code>GetRequestBuilder</code> now requires a <code>Context</code> in its constructor.</li> <li><strong>Breaking</strong>: Several properties on <code>Request</code> are now nullable.</li> <li><strong>Behaviour change</strong>: Include parameter values in the cache key by default. (<a href=https://github.com/coil-kt/coil/pull/319>#319</a>)</li> <li><strong>Behaviour change</strong>: Slightly adjust <code>Request.Listener.onStart()</code> timing to be called immediately after <code>Target.onStart()</code>. (<a href=https://github.com/coil-kt/coil/pull/348>#348</a>)</li> </ul> <hr> <ul> <li><strong>New</strong>: Add <code>WeakMemoryCache</code> implementation. (<a href=https://github.com/coil-kt/coil/pull/295>#295</a>)</li> <li><strong>New</strong>: Add <code>coil-video</code> to support decoding video frames. (<a href=https://github.com/coil-kt/coil/pull/122>#122</a>)</li> <li><strong>New</strong>: Introduce <a href=https://github.com/coil-kt/coil/blob/main/coil-base/src/main/java/coil/EventListener.kt><code>EventListener</code></a>. (<a href=https://github.com/coil-kt/coil/pull/314>#314</a>)</li> <li><strong>New</strong>: Introduce <a href=https://github.com/coil-kt/coil/blob/main/coil-singleton/src/main/java/coil/ImageLoaderFactory.kt><code>ImageLoaderFactory</code></a>. (<a href=https://github.com/coil-kt/coil/pull/311>#311</a>)</li> <li><strong>New</strong>: Support animated HEIF image sequences on Android 11. (<a href=https://github.com/coil-kt/coil/pull/297>#297</a>)</li> <li><strong>New</strong>: Improve Java compatibility. (<a href=https://github.com/coil-kt/coil/pull/262>#262</a>)</li> <li><strong>New</strong>: Support setting a default <code>CachePolicy</code>. (<a href=https://github.com/coil-kt/coil/pull/307>#307</a>)</li> <li><strong>New</strong>: Support setting a default <code>Bitmap.Config</code>. (<a href=https://github.com/coil-kt/coil/pull/342>#342</a>)</li> <li><strong>New</strong>: Add <code>ImageLoader.invalidate(key)</code> to clear a single memory cache item (<a href=https://github.com/coil-kt/coil/pull/55>#55</a>)</li> <li><strong>New</strong>: Add debug logs to explain why a cached image is not reused. (<a href=https://github.com/coil-kt/coil/pull/346>#346</a>)</li> <li><strong>New</strong>: Support <code>error</code> and <code>fallback</code> drawables for get requests.</li> </ul> <hr> <ul> <li>Fix: Fix memory cache miss when Transformation reduces input bitmap's size. (<a href=https://github.com/coil-kt/coil/pull/357>#357</a>)</li> <li>Fix: Ensure radius is below RenderScript max in BlurTransformation. (<a href=https://github.com/coil-kt/coil/pull/291>#291</a>)</li> <li>Fix: Fix decoding high colour depth images. (<a href=https://github.com/coil-kt/coil/pull/358>#358</a>)</li> <li>Fix: Disable <code>ImageDecoderDecoder</code> crash work-around on Android 11 and above. (<a href=https://github.com/coil-kt/coil/pull/298>#298</a>)</li> <li>Fix: Fix failing to read EXIF data on pre-API 23. (<a href=https://github.com/coil-kt/coil/pull/331>#331</a>)</li> <li>Fix: Fix incompatibility with Android R SDK. (<a href=https://github.com/coil-kt/coil/pull/337>#337</a>)</li> <li>Fix: Only enable inexact size if <code>ImageView</code> has a matching <code>SizeResolver</code>. (<a href=https://github.com/coil-kt/coil/pull/344>#344</a>)</li> <li>Fix: Allow cached images to be at most one pixel off requested size. (<a href=https://github.com/coil-kt/coil/pull/360>#360</a>)</li> <li>Fix: Skip crossfade transition if view is not visible. (<a href=https://github.com/coil-kt/coil/pull/361>#361</a>)</li> </ul> <hr> <ul> <li>Deprecate <code>CoilContentProvider</code>. (<a href=https://github.com/coil-kt/coil/pull/293>#293</a>)</li> <li>Annotate several <code>ImageLoader</code> methods with <code>@MainThread</code>.</li> <li>Avoid creating a <code>LifecycleCoroutineDispatcher</code> if the lifecycle is currently started. (<a href=https://github.com/coil-kt/coil/pull/356>#356</a>)</li> <li>Use full package name for <code>OriginalSize.toString()</code>.</li> <li>Preallocate when decoding software bitmap. (<a href=https://github.com/coil-kt/coil/pull/354>#354</a>)</li> </ul> <hr> <ul> <li>Update Kotlin to 1.3.72.</li> <li>Update Coroutines to 1.3.5.</li> <li>Update OkHttp to 3.12.10.</li> <li>Update Okio to 2.5.0.</li> <li>Update AndroidX dependencies:<ul> <li><code>androidx.exifinterface:exifinterface</code> -&gt; 1.2.0</li> </ul> </li> </ul> <h2 id=095-february-6-2020>[0.9.5] - February 6, 2020<a class=headerlink href=#095-february-6-2020 title="Permanent link">&para;</a></h2> <ul> <li>Fix: Ensure a view is attached before checking if it is hardware accelerated. This fixes a case where requesting a hardware bitmap could miss the memory cache.</li> </ul> <hr> <ul> <li>Update AndroidX dependencies:<ul> <li><code>androidx.core:core-ktx</code> -&gt; 1.2.0</li> </ul> </li> </ul> <h2 id=094-february-3-2020>[0.9.4] - February 3, 2020<a class=headerlink href=#094-february-3-2020 title="Permanent link">&para;</a></h2> <ul> <li>Fix: Respect aspect ratio when downsampling in ImageDecoderDecoder. Thanks @zhanghai.</li> </ul> <hr> <ul> <li>Previously bitmaps would be returned from the memory cache as long as their config was greater than or equal to the config specified in the request. For example, if you requested an <code>ARGB_8888</code> bitmap, it would be possible to have a <code>RGBA_F16</code> bitmap returned to you from the memory cache. Now, the cached config and the requested config must be equal.</li> <li>Make <code>scale</code> and <code>durationMillis</code> public in <code>CrossfadeDrawable</code> and <code>CrossfadeTransition</code>.</li> </ul> <h2 id=093-february-1-2020>[0.9.3] - February 1, 2020<a class=headerlink href=#093-february-1-2020 title="Permanent link">&para;</a></h2> <ul> <li>Fix: Translate child drawable inside <code>ScaleDrawable</code> to ensure it is centered.</li> <li>Fix: Fix case where GIFs and SVGs would not fill bounds completely.</li> </ul> <hr> <ul> <li>Defer calling <code>HttpUrl.get()</code> to background thread.</li> <li>Improve BitmapFactory null bitmap error message.</li> <li>Add 3 devices to hardware bitmap blacklist. (<a href=https://github.com/coil-kt/coil/pull/264>#264</a>)</li> </ul> <hr> <ul> <li>Update AndroidX dependencies:<ul> <li><code>androidx.lifecycle:lifecycle-common-java8</code> -&gt; 2.2.0</li> </ul> </li> </ul> <h2 id=092-january-19-2020>[0.9.2] - January 19, 2020<a class=headerlink href=#092-january-19-2020 title="Permanent link">&para;</a></h2> <ul> <li>Fix: Fix decoding GIFs on pre-API 19. Thanks @mario.</li> <li>Fix: Fix rasterized vector drawables not being marked as sampled.</li> <li>Fix: Throw exception if Movie dimensions are &lt;= 0.</li> <li>Fix: Fix CrossfadeTransition not being resumed for a memory cache event.</li> <li>Fix: Prevent returning hardware bitmaps to all target methods if disallowed.</li> <li>Fix: Fix MovieDrawable not positioning itself in the center of its bounds.</li> </ul> <hr> <ul> <li>Remove automatic scaling from CrossfadeDrawable.</li> <li>Make <code>BitmapPool.trimMemory</code> public.</li> <li>Wrap AnimatedImageDrawable in a ScaleDrawable to ensure it fills its bounds.</li> <li>Add @JvmOverloads to RequestBuilder.setParameter.</li> <li>Set an SVG's view box to its size if the view box is not set.</li> <li>Pass state and level changes to CrossfadeDrawable children.</li> </ul> <hr> <ul> <li>Update OkHttp to 3.12.8.</li> </ul> <h2 id=091-december-30-2019>[0.9.1] - December 30, 2019<a class=headerlink href=#091-december-30-2019 title="Permanent link">&para;</a></h2> <ul> <li>Fix: Fix crash when calling <code>LoadRequestBuilder.crossfade(false)</code>.</li> </ul> <h2 id=090-december-30-2019>[0.9.0] - December 30, 2019<a class=headerlink href=#090-december-30-2019 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: <code>Transformation.transform</code> now includes a <code>Size</code> parameter. This is to support transformations that change the size of the output <code>Bitmap</code> based on the size of the <code>Target</code>. Requests with transformations are now also exempt from <a href=https://coil-kt.github.io/coil/getting_started/#image-sampling>image sampling</a>.</li> <li><strong>Breaking</strong>: <code>Transformation</code>s are now applied to any type of <code>Drawable</code>. Before, <code>Transformation</code>s would be skipped if the input <code>Drawable</code> was not a <code>BitmapDrawable</code>. Now, <code>Drawable</code>s are rendered to a <code>Bitmap</code> before applying the <code>Transformation</code>s.</li> <li><strong>Breaking</strong>: Passing <code>null</code> data to <code>ImageLoader.load</code> is now treated as an error and calls <code>Target.onError</code> and <code>Request.Listener.onError</code> with a <code>NullRequestDataException</code>. This change was made to support setting a <code>fallback</code> drawable if data is <code>null</code>. Previously the request was silently ignored.</li> <li><strong>Breaking</strong>: <code>RequestDisposable.isDisposed</code> is now a <code>val</code>.</li> </ul> <hr> <ul> <li><strong>New</strong>: Support for custom transitions. <a href=https://coil-kt.github.io/coil/transitions/ >See here for more info</a>. Transitions are marked as experimental as the API is incubating.</li> <li><strong>New</strong>: Add <code>RequestDisposable.await</code> to support suspending while a <code>LoadRequest</code> is in progress.</li> <li><strong>New</strong>: Support setting a <code>fallback</code> drawable when request data is null.</li> <li><strong>New</strong>: Add <code>Precision</code>. This makes the size of the output <code>Drawable</code> exact while enabling scaling optimizations for targets that support scaling (e.g. <code>ImageViewTarget</code>). See <a href=https://github.com/coil-kt/coil/blob/main/coil-base/src/main/java/coil/size/Precision.kt>its documentation</a> for more information.</li> <li><strong>New</strong>: Add <code>RequestBuilder.aliasKeys</code> to support matching multiple cache keys.</li> </ul> <hr> <ul> <li>Fix: Make RequestDisposable thread safe.</li> <li>Fix: <code>RoundedCornersTransformation</code> now crops to the size of the target then rounds the corners.</li> <li>Fix: <code>CircleCropTransformation</code> now crops from the center.</li> <li>Fix: Add several devices to the <a href=https://github.com/coil-kt/coil/blob/main/coil-base/src/main/java/coil/memory/HardwareBitmapService.kt>hardware bitmap blacklist</a>.</li> <li>Fix: Preserve aspect ratio when converting a Drawable to a Bitmap.</li> <li>Fix: Fix possible memory cache miss with <code>Scale.FIT</code>.</li> <li>Fix: Ensure Parameters iteration order is deterministic.</li> <li>Fix: Defensive copy when creating Parameters and ComponentRegistry.</li> <li>Fix: Ensure RealBitmapPool's maxSize &gt;= 0.</li> <li>Fix: Show the start drawable if CrossfadeDrawable is not animating or done.</li> <li>Fix: Adjust CrossfadeDrawable to account for children with undefined intrinsic size.</li> <li>Fix: Fix <code>MovieDrawable</code> not scaling properly.</li> </ul> <hr> <ul> <li>Update Kotlin to 1.3.61.</li> <li>Update Kotlin Coroutines to 1.3.3.</li> <li>Update Okio to 2.4.3.</li> <li>Update AndroidX dependencies:<ul> <li><code>androidx.exifinterface:exifinterface</code> -&gt; 1.1.0</li> </ul> </li> </ul> <h2 id=080-october-22-2019>[0.8.0] - October 22, 2019<a class=headerlink href=#080-october-22-2019 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: <code>SvgDrawable</code> has been removed. Instead, SVGs are now prerendered to <code>BitmapDrawable</code>s by <code>SvgDecoder</code>. This makes SVGs <strong>significantly less expensive to render on the main thread</strong>. Also <code>SvgDecoder</code> now requires a <code>Context</code> in its constructor.</li> <li><strong>Breaking</strong>: <code>SparseIntArraySet</code> extension functions have moved to the <code>coil.extension</code> package.</li> </ul> <hr> <ul> <li><strong>New</strong>: Support setting per-request network headers. <a href=https://github.com/coil-kt/coil/pull/120>See here for more info</a>.</li> <li><strong>New</strong>: Add new <code>Parameters</code> API to support passing custom data through the image pipeline.</li> <li><strong>New</strong>: Support individual corner radii in RoundedCornersTransformation. Thanks @khatv911.</li> <li><strong>New</strong>: Add <code>ImageView.clear()</code> to support proactively freeing resources.</li> <li><strong>New</strong>: Support loading resources from other packages.</li> <li><strong>New</strong>: Add <code>subtractPadding</code> attribute to ViewSizeResolver to enable/disable subtracting a view's padding when measuring.</li> <li><strong>New</strong>: Improve HttpUrlFetcher MIME type detection.</li> <li><strong>New</strong>: Add Animatable2Compat support to MovieDrawable and CrossfadeDrawable.</li> <li><strong>New</strong>: Add <code>RequestBuilder&lt;*&gt;.repeatCount</code> to set the repeat count for a GIF.</li> <li><strong>New</strong>: Add BitmapPool creation to the public API.</li> <li><strong>New</strong>: Annotate Request.Listener methods with <code>@MainThread</code>.</li> </ul> <hr> <ul> <li>Fix: Make CoilContentProvider visible for testing.</li> <li>Fix: Include night mode in the resource cache key.</li> <li>Fix: Work around ImageDecoder native crash by temporarily writing the source to disk.</li> <li>Fix: Correctly handle contact display photo uris.</li> <li>Fix: Pass tint to CrossfadeDrawable's children.</li> <li>Fix: Fix several instances of not closing sources.</li> <li>Fix: Add a blacklist of devices with broken/incomplete hardware bitmap implementations.</li> </ul> <hr> <ul> <li>Compile against SDK 29.</li> <li>Update Kotlin Coroutines to 1.3.2.</li> <li>Update OkHttp to 3.12.6.</li> <li>Update Okio to 2.4.1.</li> <li>Change <code>appcompat-resources</code> from <code>compileOnly</code> to <code>implementation</code> for <code>coil-base</code>.</li> </ul> <h2 id=070-september-8-2019>[0.7.0] - September 8, 2019<a class=headerlink href=#070-september-8-2019 title="Permanent link">&para;</a></h2> <ul> <li><strong>Breaking</strong>: <code>ImageLoaderBuilder.okHttpClient(OkHttpClient.Builder.() -&gt; Unit)</code> is now <code>ImageLoaderBuilder.okHttpClient(() -&gt; OkHttpClient)</code>. The initializer is also now called lazily on a background thread. <strong>If you set a custom <code>OkHttpClient</code> you must set <code>OkHttpClient.cache</code> to enable disk caching.</strong> If you don't set a custom <code>OkHttpClient</code>, Coil will create the default <code>OkHttpClient</code> which has disk caching enabled. The default Coil cache can be created using <code>CoilUtils.createDefaultCache(context)</code>. e.g.:</li> </ul> <div class=highlight><pre><span></span><code><span class=kd>val</span> <span class=nv>imageLoader</span> <span class=o>=</span> <span class=n>ImageLoader</span><span class=p>(</span><span class=n>context</span><span class=p>)</span> <span class=p>{</span>
    <span class=n>okHttpClient</span> <span class=p>{</span>
        <span class=n>OkHttpClient</span><span class=p>.</span><span class=na>Builder</span><span class=p>()</span>
            <span class=p>.</span><span class=na>cache</span><span class=p>(</span><span class=n>CoilUtils</span><span class=p>.</span><span class=na>createDefaultCache</span><span class=p>(</span><span class=n>context</span><span class=p>))</span>
            <span class=p>.</span><span class=na>build</span><span class=p>()</span>
    <span class=p>}</span>
<span class=p>}</span>
</code></pre></div> <ul> <li><strong>Breaking</strong>: <code>Fetcher.key</code> no longer has a default implementation.</li> <li><strong>Breaking</strong>: Previously, only the first applicable <code>Mapper</code> would be called. Now, all applicable <code>Mapper</code>s will be called. No API changes.</li> <li><strong>Breaking</strong>: Minor named parameter renaming: <code>url</code> -&gt; <code>uri</code>, <code>factory</code> -&gt; <code>initializer</code>.</li> </ul> <hr> <ul> <li><strong>New</strong>: <code>coil-svg</code> artifact, which has an <code>SvgDecoder</code> that supports automatically decoding SVGs. Powered by <a href=https://github.com/BigBadaboom/androidsvg>AndroidSVG</a>. Thanks @rharter.</li> <li><strong>New</strong>: <code>load(String)</code> and <code>get(String)</code> now accept any of the supported Uri schemes. e.g. You can now do <code>imageView.load("file:///path/to/file.jpg")</code>.</li> <li><strong>New</strong>: Refactor ImageLoader to use <code>Call.Factory</code> instead of <code>OkHttpClient</code>. This allows lazy initialization of the networking resources using <code>ImageLoaderBuilder.okHttpClient { OkHttpClient() }</code>. Thanks @ZacSweers.</li> <li><strong>New</strong>: <code>RequestBuilder.decoder</code> to explicitly set the decoder for a request.</li> <li><strong>New</strong>: <code>ImageLoaderBuilder.allowHardware</code> to enable/disable hardware bitmaps by default for an ImageLoader.</li> <li><strong>New</strong>: Support software rendering in ImageDecoderDecoder.</li> </ul> <hr> <ul> <li>Fix: Multiple bugs with loading vector drawables.</li> <li>Fix: Support WRAP_CONTENT View dimensions.</li> <li>Fix: Support parsing EXIF data longer than 8192 bytes.</li> <li>Fix: Don't stretch drawables with different aspect ratios when crossfading.</li> <li>Fix: Guard against network observer failing to register due to exception.</li> <li>Fix: Fix divide by zero error in MovieDrawable. Thanks @R12rus.</li> <li>Fix: Support nested Android asset files. Thanks @JaCzekanski.</li> <li>Fix: Guard against running out of file descriptors on Android O and O_MR1.</li> <li>Fix: Don't crash when disabling memory cache. Thanks @hansenji.</li> <li>Fix: Ensure Target.cancel is always called from the main thread.</li> </ul> <hr> <ul> <li>Update Kotlin to 1.3.50.</li> <li>Update Kotlin Coroutines to 1.3.0.</li> <li>Update OkHttp to 3.12.4.</li> <li>Update Okio to 2.4.0.</li> <li>Update AndroidX dependencies to the latest stable versions:<ul> <li><code>androidx.appcompat:appcompat</code> -&gt; 1.1.0</li> <li><code>androidx.core:core-ktx</code> -&gt; 1.1.0</li> <li><code>androidx.lifecycle:lifecycle-common-java8</code> -&gt; 2.1.0</li> </ul> </li> <li>Replace <code>appcompat</code> with <code>appcompat-resources</code> as an optional <code>compileOnly</code> dependency. <code>appcompat-resources</code> is a much smaller artifact.</li> </ul> <h2 id=061-august-16-2019>[0.6.1] - August 16, 2019<a class=headerlink href=#061-august-16-2019 title="Permanent link">&para;</a></h2> <ul> <li>New: Add <code>transformations(List&lt;Transformation&gt;)</code> to RequestBuilder.</li> <li>Fix: Add the last modified date to the cache key for file uris.</li> <li>Fix: Ensure View dimensions are evaluated to at least 1px.</li> <li>Fix: Clear MovieDrawable's canvas between frames.</li> <li>Fix: Open assets correctly.</li> </ul> <h2 id=060-august-12-2019>[0.6.0] - August 12, 2019<a class=headerlink href=#060-august-12-2019 title="Permanent link">&para;</a></h2> <ul> <li>Initial release.</li> </ul> </article> </div> </div> </main> <footer class=md-footer> <nav class="md-footer__inner md-grid" aria-label=Footer> <a href=../api/ class="md-footer__link md-footer__link--prev" aria-label="Previous: API ‚èè" rel=prev> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12z"/></svg> </div> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Previous </span> API ‚èè </div> </div> </a> <a href=../contributing/ class="md-footer__link md-footer__link--next" aria-label="Next: Contributing" rel=next> <div class=md-footer__title> <div class=md-ellipsis> <span class=md-footer__direction> Next </span> Contributing </div> </div> <div class="md-footer__button md-icon"> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 24 24"><path d="M4 11v2h12l-5.5 5.5 1.42 1.42L19.84 12l-7.92-7.92L10.5 5.5 16 11H4z"/></svg> </div> </a> </nav> <div class="md-footer-meta md-typeset"> <div class="md-footer-meta__inner md-grid"> <div class=md-footer-copyright> <div class=md-footer-copyright__highlight> Copyright &copy; 2021 Coil Contributors </div> Made with <a href=https://squidfunk.github.io/mkdocs-material/ target=_blank rel=noopener> Material for MkDocs </a> </div> <div class=md-footer-social> <a href=https://github.com/coil-kt/coil target=_blank rel=noopener title=github.com class=md-footer-social__link> <svg xmlns=http://www.w3.org/2000/svg viewbox="0 0 496 512"><path d="M165.9 397.4c0 2-2.3 3.6-5.2 3.6-3.3.3-5.6-1.3-5.6-3.6 0-2 2.3-3.6 5.2-3.6 3-.3 5.6 1.3 5.6 3.6zm-31.1-4.5c-.7 2 1.3 4.3 4.3 4.9 2.6 1 5.6 0 6.2-2s-1.3-4.3-4.3-5.2c-2.6-.7-5.5.3-6.2 2.3zm44.2-1.7c-2.9.7-4.9 2.6-4.6 4.9.3 2 2.9 3.3 5.9 2.6 2.9-.7 4.9-2.6 4.6-4.6-.3-1.9-3-3.2-5.9-2.9zM244.8 8C106.1 8 0 113.3 0 252c0 110.9 69.8 205.8 169.5 239.2 12.8 2.3 17.3-5.6 17.3-12.1 0-6.2-.3-40.4-.3-61.4 0 0-70 15-84.7-29.8 0 0-11.4-29.1-27.8-36.6 0 0-22.9-15.7 1.6-15.4 0 0 24.9 2 38.6 25.8 21.9 38.6 58.6 27.5 72.9 20.9 2.3-16 8.8-27.1 16-33.7-55.9-6.2-112.3-14.3-112.3-110.5 0-27.5 7.6-41.3 23.6-58.9-2.6-6.5-11.1-33.3 2.6-67.9 20.9-6.5 69 27 69 27 20-5.6 41.5-8.5 62.8-8.5s42.8 2.9 62.8 8.5c0 0 48.1-33.6 69-27 13.7 34.7 5.2 61.4 2.6 67.9 16 17.7 25.8 31.5 25.8 58.9 0 96.5-58.9 104.2-114.8 110.5 9.2 7.9 17 22.9 17 46.4 0 33.7-.3 75.4-.3 83.6 0 6.5 4.6 14.4 17.3 12.1C428.2 457.8 496 362.9 496 252 496 113.3 383.5 8 244.8 8zM97.2 352.9c-1.3 1-1 3.3.7 5.2 1.6 1.6 3.9 2.3 5.2 1 1.3-1 1-3.3-.7-5.2-1.6-1.6-3.9-2.3-5.2-1zm-10.8-8.1c-.7 1.3.3 2.9 2.3 3.9 1.6 1 3.6.7 4.3-.7.7-1.3-.3-2.9-2.3-3.9-2-.6-3.6-.3-4.3.7zm32.4 35.6c-1.6 1.3-1 4.3 1.3 6.2 2.3 2.3 5.2 2.6 6.5 1 1.3-1.3.7-4.3-1.3-6.2-2.2-2.3-5.2-2.6-6.5-1zm-11.4-14.7c-1.6 1-1.6 3.6 0 5.9 1.6 2.3 4.3 3.3 5.6 2.3 1.6-1.3 1.6-3.9 0-6.2-1.4-2.3-4-3.3-5.6-2z"/></svg> </a> </div> </div> </div> </footer> </div> <div class=md-dialog data-md-component=dialog> <div class="md-dialog__inner md-typeset"></div> </div> <script id=__config type=application/json>{"base": "..", "features": [], "translations": {"clipboard.copy": "Copy to clipboard", "clipboard.copied": "Copied to clipboard", "search.config.lang": "en", "search.config.pipeline": "trimmer, stopWordFilter", "search.config.separator": "[\\s\\-]+", "search.placeholder": "Search", "search.result.placeholder": "Type to start searching", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.term.missing": "Missing", "select.version.title": "Select version"}, "search": "../assets/javascripts/workers/search.477d984a.min.js", "version": null}</script> <script src=../assets/javascripts/bundle.ddd52ceb.min.js></script> </body> </html>